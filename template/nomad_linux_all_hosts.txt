job "{{ jobname }}" {
  datacenters = ["DC1"]

  type = "system"

  constraint {
    attribute = "${attr.kernel.name}"
    value     = "linux"
  }

  constraint {
    operator = "distinct_hosts"
    value = "true"
  }
  
  group "linuxupload" {
    restart {
      attempts = 0
      mode     = "fail"
    }
    task "linuxupload" {
      driver = "raw_exec"
      resources {
  	    cpu    = 100
  	    memory = 20
      }
      logs {
        max_files     = 10
        max_file_size = 10
      }	  
      config {
          command = "{{ cmd }}"
	  args = [{{ args }}]

      }
    }
  }
}
